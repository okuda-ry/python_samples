:root{
    --card-bg: rgba(255,255,255,0.06);
    --glass: rgba(255,255,255,0.04);
    --accent: #5eead4;
    --muted: #cbd5e1;
}
html,body{height:100%;}
body{
    margin:0;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg,#0f172a 0%, #071033 60%);
    color:var(--muted);
    -webkit-font-smoothing:antialiased;
    display:flex;align-items:center;justify-content:center;
    padding:32px;
}
.wrap{width:100%;max-width:980px;display:grid;grid-template-columns:1fr 320px;gap:28px;align-items:start}
.panel{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
       border:1px solid rgba(255,255,255,0.04);padding:20px;border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,0.6)}
header{grid-column:1/-1;display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.header-wrap{display:flex;align-items:center;justify-content:space-between;gap:12px}
.header-left{display:flex;flex-direction:column}
.header-left h1{font-size:20px;color:#e6eef8;margin:0;font-weight:700}
.header-left p{margin:4px 0 0 0;color:rgba(203,213,225,0.6);font-size:13px}
.target-card{display:flex;align-items:center;gap:16px}
.color-swatch{width:100%;height:160px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);box-shadow:inset 0 -6px 18px rgba(0,0,0,0.45);position:relative;overflow:hidden}
.target-meta{font-size:13px;color:var(--muted)}
.controls{display:flex;flex-direction:column;gap:14px}
.tap-row{display:flex;gap:12px;align-items:end;justify-content:space-between}
.tap{flex:1;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px 12px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;align-items:center;position:relative}
.tap::before{content:'';position:absolute;top:-10px;left:50%;transform:translateX(-50%);width:46px;height:10px;border-radius:10px;background:var(--t, #fff);box-shadow:0 6px 18px rgba(2,6,23,0.45);opacity:0.95}
.tap .label{font-size:13px;margin-bottom:6px}
input[type=range]{-webkit-appearance:none;width:100%;height:10px;border-radius:999px;background:linear-gradient(90deg,#0ea5e9 0%, #7c3aed 100%);outline:none}
input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;border-radius:50%;background:#fff;border:3px solid rgba(0,0,0,0.2);box-shadow:0 2px 6px rgba(0,0,0,0.4)}
.val{font-weight:600;color:#fff;margin-top:8px}
.result-card{display:flex;flex-direction:column;gap:14px;align-items:center}
.result-display{width:220px;height:220px;border-radius:16px;border:1px solid rgba(255,255,255,0.06);box-shadow:0 18px 50px rgba(2,6,23,0.65);position:relative;overflow:hidden;background:linear-gradient(180deg, rgba(0,0,0,0.06), rgba(0,0,0,0.12));}
.result-layers{position:absolute;left:0;right:0;bottom:0;top:0;display:flex;flex-direction:column-reverse}
.layer{width:100%;height:0%;transition:height 900ms cubic-bezier(.2,.9,.2,1), opacity 700ms ease;mix-blend-mode:normal;opacity:1}
.layer.red{background:rgba(239,68,68,0.92)}
.layer.green{background:rgba(16,185,129,0.9)}
.layer.blue{background:rgba(59,130,246,0.9)}
.droplet{width:64px;height:64px;border-radius:50%;background:linear-gradient(180deg,rgba(255,255,255,0.16),rgba(255,255,255,0.04));display:flex;align-items:center;justify-content:center;color:#022;box-shadow:0 18px 40px rgba(2,6,23,0.6);font-weight:700;transform:translateY(6px)}
.mix-overlay{position:absolute;inset:0;border-radius:14px;opacity:0;pointer-events:none;transition:opacity 700ms ease, transform 700ms cubic-bezier(.2,.9,.2,1);transform:scale(0.995)}
.mix-overlay.stir{animation:stir 900ms ease-in-out both}
.mix-overlay::after{content:'';position:absolute;inset:0;mix-blend-mode:overlay;opacity:0.06;background:radial-gradient(circle at 30% 20%, rgba(255,255,255,0.06), transparent 10%), radial-gradient(circle at 70% 80%, rgba(0,0,0,0.06), transparent 12%);filter:blur(2px);}
@keyframes stir{0%{filter:blur(4px) saturate(0.9);}50%{filter:blur(1px) saturate(1.05) hue-rotate(6deg);transform:scale(1.01);}100%{filter:blur(0px) saturate(1);transform:scale(1);}}
.actions{display:flex;gap:12px}
button.cta{background:linear-gradient(90deg,#06b6d4,#7c3aed);border:none;color:#fff;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600}
p#message{margin:0;color:var(--accent);font-weight:600}
footer{grid-column:1/-1;text-align:center;font-size:12px;color:rgba(203,213,225,0.6);margin-top:8px}
@media(max-width:900px){.wrap{grid-template-columns:1fr;}}
@media(max-width:680px){
    .tap-row{flex-direction:column;align-items:stretch}
    .result-display{width:100%;height:160px}
}

/* Sidebar styles */
.sidebar{display:flex;flex-direction:column;gap:12px;align-items:stretch}
.sidebar .color-swatch{height:200px;border-radius:12px;border:1px solid rgba(255,255,255,0.06);background:linear-gradient(180deg, rgba(0,0,0,0.06), rgba(0,0,0,0.12));box-shadow:0 18px 50px rgba(2,6,23,0.65);position:relative;overflow:hidden}
.sidebar h2{margin:0}
/* result row controls */
.result-row{display:flex;align-items:center;gap:18px}
.result-controls{display:flex;flex-direction:row;gap:18px;align-items:center}
.controls-center{display:flex;flex-direction:column;align-items:center;gap:10px}
.btn-stack{display:flex;flex-direction:column;gap:8px;align-items:center}
.result-controls .droplet{transform:none}
.final-score{min-width:180px;color:var(--accent);font-weight:600}

/* small note next to headings */
.eval-note{color:var(--muted);font-size:12px}

/* droplet particle */
.drop-particle{position:absolute;width:12px;height:12px;border-radius:50%;pointer-events:none;box-shadow:0 6px 14px rgba(2,6,23,0.5);opacity:0;transform:translateY(-10px);}
.drop-particle.small{width:8px;height:8px}
.drop-particle::after{content:'';position:absolute;inset:0;border-radius:inherit;background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8), rgba(255,255,255,0.2));}